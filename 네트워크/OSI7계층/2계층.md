### 2계층 - 데이터 링크 계층(Data Link Layer)

> 물리 계층으로 송수신되는 정보를 관리하여 데이터가 안전하게 전달되도록 도와주고,<br>동일한 네트워크 세그먼트(ex. 스위치)에 있는 두 장비 사이에 데이터 전송을 담당하는 계층

2계층의 **주요 기능 및 특징**은 다음과 같다.

- 데이터 단위를 네트워크 전송 방식에 맞춰 Frame 단위로 변경
- 에러 제어
- 흐름 제어
- MAC주소를 통해 통신

보다 **구체적인 내용**은 다음과 같다.

- 데이터 단위를 네트워크 전송 방식에 맞춰 Frame 단위로 변경

  - Token Ring 방식이 아닌, 현재 가장 널리 사용되고 있는 IEEE 802.3 Ethernet 방식에서의 frame은 다음과 같이 구성되어 있음

    ![](https://i.imgur.com/uwBqlyc.png)

    - Preamble : data를 정확히 보내기 위한 일련의 정보들. 처음에는 신호 지연으로 인한 몇 비트의 손실을 허용하기 위해 PRE(Preamble)가 도입되었다고 하나, 오늘날의 고속 이더넷은 프레임 비트를 보호하는 대신 receiver에게 프레임이 오고 있으니 실제 프레임이 시작되기 전에 receiver가 데이터 스트림에 잠길 수 있도록 하는 역할을 한다고 함
    - Start of Frame Delimiter : 지금부터 frame이 시작된다고 알려주는 1byte
    - Destination MAC address : 수신하는 point의 MAC 주소. 이를 통해 데이터 링크 계층에서는 switch 하단에서 서로 맞물려있는 MAC들끼리는 MAC 주소를 통해 서로 데이터의 송수신이 가능해진다. ip 주소까지 접근할 필요도 없게 된다 이말이야.
    - Source MAC address : 송신하는 point의 MAC 주소
    - VLAN Tag : Class A,B,C의 비효율성을 극복하기 위해 들어간 추가 옵션
    - Size : 프레임의 전체 길이를 의미(제 생각에는 Payload의 길이라고 생각되는데, 확실하지 않습니다). 이 16비트 필드는 0에서 65534 사이의 길이 값을 저장할 수 있지만, 일부 이더넷 제한 때문에 길이가 1500보다 클 수 없다고 한다.
    - Payload : 전송하고자 하는 data
    - CRC (Cyclic Redundancy Check)
      - 이 필드에는 대상 주소, 원본 주소, 길이 및 데이터 필드를 통해 생성되는 32비트 데이터 해시 코드가 포함되어 있음
      - CRC는 오류 등으로 인한 원시 데이터의 변경을 쉽게 탐지하기 위한 기술로, 송신 당시 만든 CRC 필드의 값과 수신 당시 받은 data를 hashing했을 때 도출되는 CRC필드의 값이 일치하지 않으면 수신 과정에서 에러가 있음을 알아차릴 수 있음.

- 에러 제어
  - CRC를 활용하는 등 에러를 검출하는 과정에서 에러가 발견되었을 경우, 다음과 같은 방식으로 에러를 제어하여 3계층으로 안전한 데이터를 올려보낸다.
    1. Hamming Code 등의 오류 교정 기법을 활용하여 직접 오류를 교정한 후, 3계층으로 데이터를 전달한다.
    2. 수신받은 데이터를 폐기하고, 송신 측에 데이터를 다시 보내달라는 재요청을 한다.
- 흐름 제어

  - 송신자와 수신자의 처리 속도간의 차이를 해결하기 위한 제어로, 송신 측에게 데이터 송신을 멈춰달라거나 속도를 조절해달라는 등의 feedback을 줄 수 있다.

- MAC 주소를 통해 통신

  - MAC 주소

    - NIC(Network Interface Card)에 부여된 고유한 주소
    - 총 48비트로 구성되어 있으며, 앞의 24비트는 제조사 식별자, 뒤 24비트는 기기 식별자

    - 기기에 할당된 MAC 주소는 고유하며, 변경되지 않음

- 데이터 전송 단위 : Frames
- 관련 장비 : 브릿지, (인텔리전트)허브 (=스위치)
